<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<link rel="shortcut icon" href="imagens/favicon.ico" type="image/x-icon">
<link rel="stylesheet" href="style.css">
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css"
	rel="stylesheet">
<script
	src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js"></script>
<title>Insert title here</title>
</head>
<body style="background-color: #10101D;">

	<!-- Header dinâmico -->
	<div id="header"></div>

	<!-- Saudação do usuário -->
	<div id="saudacao-usuario"
		style="text-align: right; padding: 10px 30px 0 0; font-weight: bold; color: rgb(148, 233, 21);">
	</div>

	<div id="main-content" class="form-page">

		<main>

			<section class="detalhes-jogo">
				<img src="../imagens/bo2.jpg"
					alt="Capa de Call of Duty: Black Ops II" class="imagem-jogo">

				<div class="info-jogo">
					<h2>The Last of Us: Parte II</h2>
					<p>
						<strong>Preço:</strong> R$ 119,99
					</p>
					<p>
						<strong>Desenvolvedor:</strong> Naughty Dog
					</p>
					<p>
						<strong>Ano de Lançamento:</strong> 2020
					</p>
					<p>
						<strong>Gênero:</strong> Aventura, Ação
					</p>
					<p>
						<strong>Classificação:</strong> 18 anos
					</p>
					<p>
						<strong>Idioma:</strong> Inglês (com dublagem oficial em
						português)
					</p>
					<p>
						<strong>Plataforma:</strong> PC, PlayStation 5
					</p>
					<p>
						<strong>Avaliação:</strong> 4.6
					</p>
					<p>
						<strong>Sinopse:</strong> "The Last of Us Part II", acompanha
						Ellie e Joel cinco anos após os eventos do primeiro jogo, agora
						vivendo em relativa paz em Jackson, Wyoming. No entanto, a
						tranquilidade é interrompida por um evento trágico que desencadeia
						a busca de Ellie por vingança em Seattle..
					</p>

					<a href="index.html" class="botao-link">Voltar</a> <br>


					<!-- Comentários -->
					<div class="comentarios-section">

						<h4 class="text-white mb-3">Comentários</h4>

						<!-- AQUI virão os cards de comentários já existentes;
       você pode renderizar com JS ou, se preferir, substituir por JSP mais tarde. -->

						<!-- Novo Comentário -->
						<div class="card bg-dark text-white">
							<div class="card-body">
								<h5 class="card-title">Novo Comentário</h5>

								<!-- FORMULÁRIO: envia direto para o servlet -->
								<form id="comentario-form"
									action="/ProjetoGames/criar-comentario" method="POST">

									<!-- id do jogo (preenchido via JS) -->
									<input type="hidden" name="idJogo" id="campoIdJogo">

									<!-- NOTA -->
									<div class="mb-3">
										<label for="comentarioNota" class="form-label">Nota (0
											a 5):</label> <select class="form-control" id="comentarioNota"
											name="nota" required>
											<option value="" disabled selected>Selecione</option>
											<option value="0">0</option>
											<option value="1">1</option>
											<option value="2">2</option>
											<option value="3">3</option>
											<option value="4">4</option>
											<option value="5">5</option>
										</select>
									</div>

									<!-- TEXTO -->
									<div class="mb-3">
										<label for="comentarioTexto" class="form-label">Escreva
											seu comentário:</label>
										<textarea class="form-control" id="comentarioTexto"
											name="texto" rows="3" required></textarea>
									</div>

									<button type="submit" class="btn btn-success"
										style="background-color: rgb(148, 233, 21);">Enviar
										Comentário</button>
								</form>
							</div>
						</div>

					</div>
					<!-- /comentarios-section -->



				</div>

			</section>
		</main>



		<!-- Footer dinâmico -->
		<div id="footer"></div>

		<!-- Scripts -->
		<!-- Script: Header + Footer + Login -->
		<script>
    // Carrega o HEADER
    fetch('header.html')
      .then(response => response.text())
      .then(data => {
        document.getElementById('header').innerHTML = data;

        // Após o header, verifica usuário logado
        fetch('/ProjetoGames/api/usuario-logado')
          .then(res => res.json())
          .then(data => {
            if (data.nome) {
              // Saudação no topo
              document.getElementById('saudacao-usuario').textContent = `Bem-vindo, ${data.nome}`;

              // Trocar botão login por logout
              const loginLogoutLi = document.getElementById('loginLogoutLink');
              if (loginLogoutLi) {
                loginLogoutLi.innerHTML = `<a class="nav-link" href="/ProjetoGames/LogoutServlet">Logout</a>`;
              }
            }
          });
      });

    // Carrega o FOOTER
    fetch('footer.html')
      .then(response => response.text())
      .then(data => {
        document.getElementById('footer').innerHTML = data;
      });
    
  </script>
</body>
</html>